<!DOCTYPE html>
<html lang='en'>
<meta charset='utf-8' />
<meta name='viewport'
      content='width=device-width, initial-scale=1.0, user-scalable=yes' />
<title>hypomnemae </title>
<link rel='icon' type='image/x-icon' href='favicon.ico' />
<link rel='alternate'
      type='application/atom+xml'
      title='Atom'
      href='http://hypomnema.net/feed.atom'>

  <link rel='stylesheet' href='style.css' />

<header id='title-block-header'>
  <h1 class='sitename'>hypomnema</h1>
  <nav class='global-nav'>
    <a href='/'>Home</a>
    <a href='about'>About</a>
    <a href='contact'>Contact</a>
  </nav>
  <div class='search'>
    <input type='text' id='query' onkeyup='doSearch()' placeholder='Search'>
    <ul id='results'>
    </ul>
  </div>
</header>

<main>

<div class="categories">
<!--
<div class='category'>
## Philosophy
* [Ignatius: _Smyrnaeans_](rusting-tools)
* [Ignatius: _Ephesians_](rusting-tools)
* [Ignatius: _Magnesians_](rusting-tools)
* [Ignatius: _Romans_](rusting-tools)
</div>
-->
<section id="politics" class="category">
<h2>Politics</h2>
<ul>
<li><a href="if-you-like-your-app">If you like your app, you can keep it!</a></li>
<li><a href="dead-reckoning">Dead reckoning</a></li>
</ul>
</section>
<section id="technology" class="category">
<h2>Technology</h2>
<ul>
<li><a href="rusting-tools">Rusting tools</a></li>
<li><a href="one-small-step-for-man">One small step for man</a></li>
<li><a href="a-hop-skip-and-a-jump">A hop, skip, and a jump</a></li>
<li><a href="spinning-tops">Spinning tops</a></li>
</ul>
</section>
</div>
</main>

<footer>
  <a href='https://creativecommons.org/licenses/by/4.0/'>
    <img alt='Creative Commons license' src='cc.svg'>
  </a>
  <p class='date'>Last modified: 2020-04-21</p>
  <a href='/feed.atom'>
    <img alt='Atom feed' src='feed.svg'>
  </a>
</footer>

<script type='module'>
  import { search, default as init } from './tinysearch_engine.js';
  window.search = search;

  async function run() {
    await init('./tinysearch_engine_bg.wasm');
  }

  run();
</script>

<script>
  function doSearch() {
    let value = document.getElementById('query').value;
    const arr = search(value, 10);
    let ul = document.getElementById('results');
    ul.innerHTML = '';

    for (i = 0; i < arr.length; i++) {
      var li = document.createElement('li');

      let elem = arr[i];
      let elemlink = document.createElement('a');
      elemlink.innerHTML = elem[0];
      elemlink.setAttribute('href', elem[1]);
      li.appendChild(elemlink);

      ul.appendChild(li);
    }
  }
</script>
