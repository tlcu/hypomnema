<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' lang='' xml:lang=''>
<head>
  <meta charset='utf-8' />
  <meta name='generator' content='pandoc' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=yes' />
  <title>hypomnema – Spinning tops</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="alternate"
        type="application/atom+xml"
        title="Atom"
        href="http://hypomnema.net/feed.atom">
  <link rel='stylesheet' href='style.css' />
  <!--[if lt IE 9]>
    <script src='//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js'></script>
  <![endif]-->
  <meta name='author' content='Thomas Lee Culverwell' />
 <meta name='dcterms.date' content='2020-04-05' />
<link rel="icon" type="image/png" href="favicon.png" />
</head>
<body>
<header id='title-block-header'>
<h1 class='sitename'>hypomnema</h1>
<nav class='global-nav'>
  <a href='/'>Home</a>
  <a href='about'>About</a>
  <a href='contact'>Contact</a>
</nav>
<div class='search'>
  <input type='text' id='query' onkeyup='doSearch()' placeholder='Search'>
  <ul id='results'>
  </ul>
</div>
</header>
<main>
<h2 class='title'>
  Spinning tops
  </h2>
<p>System monitoring is useful whether on a home desktop, workstation, or server. The classic Unix program <code>top</code> defines the standard interface: an interactive, filterable, running tally of what is hogging how many resources. But in the decades since release, <code>top</code> faces increasing competition:</p>
<table>
<thead>
<tr class="header">
<th>command</th>
<th>year</th>
<th>language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://sourceforge.net/projects/unixtop/">top</a></td>
<td>1984</td>
<td>C</td>
</tr>
<tr class="even">
<td><a href="https://hisham.hm/htop/">htop</a></td>
<td>2004</td>
<td>C</td>
</tr>
<tr class="odd">
<td><a href="https://nicolargo.github.io/glances/">glances</a></td>
<td>2011</td>
<td>Python</td>
</tr>
<tr class="even">
<td><a href="https://github.com/MrRio/vtop">vtop</a></td>
<td>2014</td>
<td>JavaScript</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/aksakalli/gtop">gtop</a></td>
<td>2017</td>
<td>JavaScript</td>
</tr>
<tr class="even">
<td><a href="https://github.com/ClementTsang/bottom">btm</a></td>
<td>2019</td>
<td>Rust</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/bvaisvil/zenith">zenith</a></td>
<td>2019</td>
<td>Rust</td>
</tr>
<tr class="even">
<td><a href="https://github.com/cjbassi/ytop">ytop</a></td>
<td>2020</td>
<td>Rust</td>
</tr>
</tbody>
</table>
<p>What do these competitors offer? Mostly a better interface. For a long time <code>htop</code> ruled the roost, but doesn’t necessarily play well with terminal colors. The way <code>htop</code> graphs its data is also… rudimentary. But it’s well-known and supported, so I used it <a href="https://www.wezm.net/v2/posts/2020/rust-top-alternatives/">until recently</a> I discovered that Rust developers had been working on replacements. To decide which of these alternatives is truly worthy, I decided to test them all by the following criteria:</p>
<ul>
<li>how much memory and processing do they consume at idle?</li>
<li>how ‘fast’ do they feel?</li>
<li>how well do they handle different terminal sizes?</li>
<li>do they include graphs and colors?</li>
<li>how much do I like them?</li>
</ul>
<p>First we can look at the more ‘objective’ stats. I include the minimum and maximum percent observed while running the tests on an i7 (six-core, 2.2GHz) laptop with 16GB of RAM. Some programs usage spiked, others remained steady. Hopefully reporting the numbers this way gives a sense of that. Measurements were taken from <code>htop</code> and results are ranked from best to worst performance:</p>
<table>
<thead>
<tr class="header">
<th>command</th>
<th>min. CPU %</th>
<th>max. CPU %</th>
<th>min. MEM %</th>
<th>max. MEM %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>top</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td>htop</td>
<td>0.1</td>
<td>0.2</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td>ytop</td>
<td>0.2</td>
<td>0.9</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td>zenith</td>
<td>0.0</td>
<td>1.9</td>
<td>0.1</td>
<td>0.1</td>
</tr>
<tr class="odd">
<td>btm</td>
<td>1.9</td>
<td>4.2</td>
<td>0.1</td>
<td>0.1</td>
</tr>
<tr class="even">
<td>glances</td>
<td>0.0</td>
<td>7.7</td>
<td>0.3</td>
<td>0.4</td>
</tr>
<tr class="odd">
<td>vtop</td>
<td>3.0</td>
<td>6.1</td>
<td>0.5</td>
<td>0.5</td>
</tr>
<tr class="even">
<td>gtop</td>
<td>3.1</td>
<td>7.2</td>
<td>0.6</td>
<td>0.6</td>
</tr>
</tbody>
</table>
<p>In defense of <code>glances</code>, it does do more work than the others—including reporting to a web interface and other potentially useful server-oriented features. As for the others, the numbers speak for themselves. Let’s consider more subjective qualities: ranking from 0-3 where 0 means that a feature either is not supported or is unacceptably bad. Results are sorted by total:</p>
<table>
<thead>
<tr class="header">
<th>command</th>
<th>color</th>
<th>scales</th>
<th>graphs</th>
<th>speed</th>
<th>info</th>
<th>like</th>
<th>total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ytop</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>2</td>
<td>3</td>
<td>15</td>
</tr>
<tr class="even">
<td>zenith</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>14</td>
</tr>
<tr class="odd">
<td>btm</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>12</td>
</tr>
<tr class="even">
<td>htop</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td>11</td>
</tr>
<tr class="odd">
<td>top</td>
<td>0</td>
<td>3</td>
<td>0</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td>10</td>
</tr>
<tr class="even">
<td>gtop</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>9</td>
</tr>
<tr class="odd">
<td>glances</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td>vtop</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>We see here that the JavaScript tools fall behind in both performance and in functionality. The ‘like’ factor is of course very personal: if you don’t resize your windows much, the ‘scales’ column will probably impact your ‘like’ factor far less than it does mine. <code>ytop</code> and <code>btm</code> have <code>vi</code>-style controls which I like, and <code>zenith</code> lets you move back and forth in time. Below are screenshots of the tools ranked by how likely I am to use them, but none of the new Rust tools are bad choices. <code>top</code> isn’t going anywhere just yet.</p>
<figure>
<img src="top.jpg" title="top" alt="" /><figcaption>top</figcaption>
</figure>
<figure>
<img src="ytop.jpg" title="ytop" alt="" /><figcaption>ytop</figcaption>
</figure>
<figure>
<img src="zenith.jpg" title="zenith" alt="" /><figcaption>zenith</figcaption>
</figure>
<figure>
<img src="btm.jpg" title="btm" alt="" /><figcaption>btm</figcaption>
</figure>
<figure>
<img src="htop.jpg" title="htop" alt="" /><figcaption>htop</figcaption>
</figure>
<figure>
<img src="glances.jpg" title="glances" alt="" /><figcaption>glances</figcaption>
</figure>
<figure>
<img src="gtop.jpg" title="gtop" alt="" /><figcaption>gtop</figcaption>
</figure>
<figure>
<img src="vtop.jpg" title="vtop" alt="" /><figcaption>vtop</figcaption>
</figure>
</main>
<footer>
<!--
<p class='author'>by Thomas Lee Culverwell</p>
-->
<p class='license'>
<a href='https://creativecommons.org/licenses/by/4.0/'>
<svg id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'
	 width='24px' height='24px' viewBox='5.5 -3.5 64 64' enable-background='new 5.5 -3.5 64 64' xml:space='preserve'>
<g>
	<circle fill='#FFFFFF' cx='37.785' cy='28.501' r='28.836'/>
	<path fill='blue' d='M37.441-3.5c8.951,0,16.572,3.125,22.857,9.372c3.008,3.009,5.295,6.448,6.857,10.314
		c1.561,3.867,2.344,7.971,2.344,12.314c0,4.381-0.773,8.486-2.314,12.313c-1.543,3.828-3.82,7.21-6.828,10.143
		c-3.123,3.085-6.666,5.448-10.629,7.086c-3.961,1.638-8.057,2.457-12.285,2.457s-8.276-0.808-12.143-2.429
		c-3.866-1.618-7.333-3.961-10.4-7.027c-3.067-3.066-5.4-6.524-7-10.372S5.5,32.767,5.5,28.5c0-4.229,0.809-8.295,2.428-12.2
		c1.619-3.905,3.972-7.4,7.057-10.486C21.08-0.394,28.565-3.5,37.441-3.5z M37.557,2.272c-7.314,0-13.467,2.553-18.458,7.657
		c-2.515,2.553-4.448,5.419-5.8,8.6c-1.354,3.181-2.029,6.505-2.029,9.972c0,3.429,0.675,6.734,2.029,9.913
		c1.353,3.183,3.285,6.021,5.8,8.516c2.514,2.496,5.351,4.399,8.515,5.715c3.161,1.314,6.476,1.971,9.943,1.971
		c3.428,0,6.75-0.665,9.973-1.999c3.219-1.335,6.121-3.257,8.713-5.771c4.99-4.876,7.484-10.99,7.484-18.344
		c0-3.543-0.648-6.895-1.943-10.057c-1.293-3.162-3.18-5.98-5.654-8.458C50.984,4.844,44.795,2.272,37.557,2.272z M37.156,23.187
		l-4.287,2.229c-0.458-0.951-1.019-1.619-1.685-2c-0.667-0.38-1.286-0.571-1.858-0.571c-2.856,0-4.286,1.885-4.286,5.657
		c0,1.714,0.362,3.084,1.085,4.113c0.724,1.029,1.791,1.544,3.201,1.544c1.867,0,3.181-0.915,3.944-2.743l3.942,2
		c-0.838,1.563-2,2.791-3.486,3.686c-1.484,0.896-3.123,1.343-4.914,1.343c-2.857,0-5.163-0.875-6.915-2.629
		c-1.752-1.752-2.628-4.19-2.628-7.313c0-3.048,0.886-5.466,2.657-7.257c1.771-1.79,4.009-2.686,6.715-2.686
		C32.604,18.558,35.441,20.101,37.156,23.187z M55.613,23.187l-4.229,2.229c-0.457-0.951-1.02-1.619-1.686-2
		c-0.668-0.38-1.307-0.571-1.914-0.571c-2.857,0-4.287,1.885-4.287,5.657c0,1.714,0.363,3.084,1.086,4.113
		c0.723,1.029,1.789,1.544,3.201,1.544c1.865,0,3.18-0.915,3.941-2.743l4,2c-0.875,1.563-2.057,2.791-3.541,3.686
		c-1.486,0.896-3.105,1.343-4.857,1.343c-2.896,0-5.209-0.875-6.941-2.629c-1.736-1.752-2.602-4.19-2.602-7.313
		c0-3.048,0.885-5.466,2.658-7.257c1.77-1.79,4.008-2.686,6.713-2.686C51.117,18.558,53.938,20.101,55.613,23.187z'/>
</g>
</svg>
</a>
</p>
<p class='date'>Last modified: 2020-04-05</p>
<p><a href='/feed.atom'>
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width='24px' height="24px" viewBox="0 0 1280.000000 1280.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.15, written by Peter Selinger 2001-2017
</metadata>
<g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
fill="blue" stroke="none">
<path d="M2295 11940 c-293 -14 -624 -45 -712 -67 l-23 -5 0 -1049 c0 -618 4
-1049 9 -1049 5 0 76 11 158 25 423 70 975 91 1478 54 1554 -112 2982 -700
4173 -1717 189 -162 592 -565 752 -753 1021 -1194 1607 -2619 1719 -4174 37
-503 16 -1055 -54 -1478 -14 -82 -25 -153 -25 -158 0 -5 431 -9 1049 -9 l1049
0 6 28 c65 319 92 1131 56 1697 -70 1094 -334 2170 -775 3165 -864 1949 -2399
3560 -4298 4511 -1127 565 -2305 885 -3572 969 -214 14 -778 20 -990 10z"/>
<path d="M2255 7855 c-258 -24 -600 -78 -671 -105 l-24 -10 0 -905 c0 -498 1
-905 3 -905 1 0 63 20 137 45 157 53 250 75 450 106 128 20 184 23 470 24 387
0 516 -14 840 -92 919 -221 1723 -828 2198 -1658 193 -338 334 -728 401 -1112
42 -235 46 -292 46 -623 -1 -286 -4 -342 -24 -470 -31 -200 -53 -293 -106
-450 -25 -74 -45 -136 -45 -137 0 -2 407 -3 905 -3 l905 0 10 24 c31 82 90
482 111 750 15 194 6 745 -15 916 -28 225 -46 343 -77 491 -158 781 -524 1562
-1023 2184 -176 220 -443 499 -646 676 -588 514 -1289 886 -2064 1098 -243 67
-443 104 -786 147 -175 22 -804 28 -995 9z"/>
<path d="M2515 3824 c-510 -86 -900 -508 -944 -1020 -40 -460 189 -884 599
-1107 126 -69 274 -112 431 -126 814 -70 1429 700 1183 1481 -147 466 -598
792 -1088 787 -55 -1 -137 -7 -181 -15z"/>
</g>
</svg>
</a></p>

</footer>
<script type='module'>
  import { search, default as init } from './tinysearch_engine.js';
  window.search = search;

  async function run() {
    await init('./tinysearch_engine_bg.wasm');
  }

  run();
</script>

<script>
  function doSearch() {
    let value = document.getElementById('query').value;
    const arr = search(value, 10);
    let ul = document.getElementById('results');
    ul.innerHTML = '';

    for (i = 0; i < arr.length; i++) {
      var li = document.createElement('li');

      let elem = arr[i];
      let elemlink = document.createElement('a');
      elemlink.innerHTML = elem[0];
      elemlink.setAttribute('href', elem[1]);
      li.appendChild(elemlink);

      ul.appendChild(li);
    }
  }
</script>
</body>
</html>
